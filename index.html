<script>
const chat = document.getElementById('chat');
const form = document.getElementById('form');
const mealInput = document.getElementById('meal');
const goalSelect = document.getElementById('goal');

// Helper: random choice
function pick(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

// Mini vocabulary so it sounds dynamic
const openings = [
  "Nice choice!",
  "That sounds good!",
  "Yum — that meal sounds delicious!",
  "Cool pick!",
  "Love that combo!"
];

const encouragements = [
  "You’re doing great — keep it up!",
  "Small steps add up.",
  "Consistency beats perfection!",
  "Good on you for logging your meals.",
  "I like how mindful you’re being!"
];

function localAI(meal, goal) {
  meal = meal.toLowerCase();
  const parts = [];

  // Start friendly
  parts.push(pick(openings));

  // Protein check
  if (/(chicken|egg|tofu|fish|beans|yogurt|paneer|lentil|nuts)/.test(meal))
    parts.push("Nice protein source — helps you stay full and recover.");
  else
    parts.push("Consider adding some protein like eggs, yogurt, or beans to stay fuller longer.");

  // Fiber check
  if (/(veg|salad|fruit|apple|banana|oats|quinoa|broccoli|spinach|rice)/.test(meal))
    parts.push("Good fiber and plants — steady energy incoming!");
  else
    parts.push("A fruit or veggie would boost fiber and balance that out.");

  // Sugar check
  if (/(cake|soda|cola|dessert|candy|cookie|ice cream|juice)/.test(meal))
    parts.push("A little sweet treat is fine — maybe pair it with some protein or fiber.");

  // Goal-specific
